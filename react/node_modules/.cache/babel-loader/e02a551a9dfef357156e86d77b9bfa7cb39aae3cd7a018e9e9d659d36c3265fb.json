{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { getRequest, postRequest } from \"../../api/api\";\nimport { getItem } from \"../../utils/storage.utils\";\nconst token = getItem(\"token\");\n\n// export const createGame = createAsyncThunk(\n//   \"/games/create\",\n//   async (_, thunkApi, name) => {\n//     const { fulfillWithValue, rejectWithValue } = thunkApi;\n//     // const token = getItem(\"token\");\n//     const { status, result, error } = await postRequest(\n//       `/games/create`,\n//       name,\n//       token,\n//     );\n//     console.log(result);\n//     return error\n//       ? rejectWithValue(\n//           `Cannot create game - Error status ${status} - ${error}`,\n//         )\n//       : fulfillWithValue(result);\n//   },\n// );\n\nexport const createGame = (redirect, form) => async (dispatch, getState) => {\n  const loading = getState().games.loading;\n  if (loading) return;\n  dispatch(startLoading());\n  const {\n    status,\n    result,\n    error\n  } = await postRequest(`/users/sign-up`, form);\n  if (error) {\n    return error = `Cannot create game - Error status ${status} - ${error}`;\n  } else {\n    return result;\n  }\n  dispatch(stopLoading());\n};\nexport const getGame = createAsyncThunk(\"/games\", async (_, thunkApi) => {\n  const {\n    fulfillWithValue,\n    rejectWithValue\n  } = thunkApi;\n  //   const token = getItem(\"token\");\n  const {\n    status,\n    result,\n    error\n  } = await getRequest(`/games`, token);\n  console.log(result);\n  return error ? rejectWithValue(`Cannot get game - Error status ${status} - ${error}`) : fulfillWithValue(result);\n});\nconst gameSlice = createSlice({\n  name: \"games\",\n  initialState: {\n    games: [],\n    name: \"\",\n    loading: false,\n    error: null\n  },\n  reducers: {\n    startLoading: state => {\n      return {\n        ...state,\n        loading: true\n      };\n    },\n    stopLoading: state => {\n      return {\n        ...state,\n        loading: false\n      };\n    },\n    updateGame: (state, action) => {\n      const {\n        key,\n        value\n      } = action.payload;\n      return {\n        ...state,\n        [key]: value\n      };\n      // state[key] = value;\n    },\n\n    addGame: (state, action) => {\n      return {\n        ...state,\n        games: {\n          ...action.payload\n        }\n      };\n    }\n  },\n  extraReducers: builder => {\n    builder\n    //   .addCase(createGame.fulfilled, (state, action) => {\n    //     return { ...state, loading: false, games: [action.payload] };\n    //   })\n    //   .addCase(createGame.rejected, (state, action) => {\n    //     return { ...state, loading: false, error: action.payload };\n    //   })\n    //   .addCase(createGame.pending, (state) => {\n    //     return { ...state, loading: true };\n    //   })\n    .addCase(getGame.fulfilled, (state, action) => {\n      return {\n        ...state,\n        loading: false,\n        games: [...action.payload.games]\n      };\n    }).addCase(getGame.rejected, (state, action) => {\n      return {\n        ...state,\n        loading: false,\n        error: action.payload\n      };\n    }).addCase(getGame.pending, (state, action) => {\n      return {\n        ...state,\n        loading: true\n      };\n    });\n  }\n});\nexport const {\n  startLoading,\n  stopLoading,\n  updateGame\n} = gameSlice.actions;\nexport default gameSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","getRequest","postRequest","getItem","token","createGame","redirect","form","dispatch","getState","loading","games","startLoading","status","result","error","stopLoading","getGame","_","thunkApi","fulfillWithValue","rejectWithValue","console","log","gameSlice","name","initialState","reducers","state","updateGame","action","key","value","payload","addGame","extraReducers","builder","addCase","fulfilled","rejected","pending","actions","reducer"],"sources":["/Users/watsonandrew/Desktop/scoreUp/react/src/redux/reducers/game.slice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { getRequest, postRequest } from \"../../api/api\";\nimport { getItem } from \"../../utils/storage.utils\";\n\nconst token = getItem(\"token\");\n\n// export const createGame = createAsyncThunk(\n//   \"/games/create\",\n//   async (_, thunkApi, name) => {\n//     const { fulfillWithValue, rejectWithValue } = thunkApi;\n//     // const token = getItem(\"token\");\n//     const { status, result, error } = await postRequest(\n//       `/games/create`,\n//       name,\n//       token,\n//     );\n//     console.log(result);\n//     return error\n//       ? rejectWithValue(\n//           `Cannot create game - Error status ${status} - ${error}`,\n//         )\n//       : fulfillWithValue(result);\n//   },\n// );\n\nexport const createGame = (redirect, form) => async (dispatch, getState) => {\n  const loading = getState().games.loading;\n  if (loading) return;\n  dispatch(startLoading());\n  const { status, result, error } = await postRequest(`/users/sign-up`, form);\n  if (error) {\n    return (error = `Cannot create game - Error status ${status} - ${error}`);\n  } else {\n    return result;\n  }\n  dispatch(stopLoading());\n};\n\nexport const getGame = createAsyncThunk(\"/games\", async (_, thunkApi) => {\n  const { fulfillWithValue, rejectWithValue } = thunkApi;\n  //   const token = getItem(\"token\");\n  const { status, result, error } = await getRequest(`/games`, token);\n  console.log(result);\n  return error\n    ? rejectWithValue(`Cannot get game - Error status ${status} - ${error}`)\n    : fulfillWithValue(result);\n});\n\nconst gameSlice = createSlice({\n  name: \"games\",\n  initialState: {\n    games: [],\n    name: \"\",\n    loading: false,\n    error: null,\n  },\n  reducers: {\n    startLoading: (state) => {\n      return { ...state, loading: true };\n    },\n    stopLoading: (state) => {\n      return { ...state, loading: false };\n    },\n    updateGame: (state, action) => {\n      const { key, value } = action.payload;\n      return { ...state, [key]: value };\n      // state[key] = value;\n    },\n    addGame: (state, action) => {\n      return { ...state, games: { ...action.payload } };\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      //   .addCase(createGame.fulfilled, (state, action) => {\n      //     return { ...state, loading: false, games: [action.payload] };\n      //   })\n      //   .addCase(createGame.rejected, (state, action) => {\n      //     return { ...state, loading: false, error: action.payload };\n      //   })\n      //   .addCase(createGame.pending, (state) => {\n      //     return { ...state, loading: true };\n      //   })\n      .addCase(getGame.fulfilled, (state, action) => {\n        return {\n          ...state,\n          loading: false,\n          games: [...action.payload.games],\n        };\n      })\n      .addCase(getGame.rejected, (state, action) => {\n        return { ...state, loading: false, error: action.payload };\n      })\n      .addCase(getGame.pending, (state, action) => {\n        return { ...state, loading: true };\n      });\n  },\n});\n\nexport const { startLoading, stopLoading, updateGame } = gameSlice.actions;\n\nexport default gameSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}