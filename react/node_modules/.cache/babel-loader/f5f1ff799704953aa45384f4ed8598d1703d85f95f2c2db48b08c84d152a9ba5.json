{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { getRequest, postRequest } from \"../../api/api\";\nimport { getItem } from \"../../utils/storage.utils\";\nexport const createGame = createAsyncThunk(\"/games/create\", async thunkApi => {\n  const {\n    fulfillWithValue,\n    rejectWithValue\n  } = thunkApi;\n  const token = getItem(\"token\");\n  const {\n    status,\n    result,\n    error\n  } = await postRequest(`/games/create`, token);\n  return error ? rejectWithValue(`Cannot create game - Error status ${status} - ${error}`) : fulfillWithValue(result);\n});\nexport const getGame = createAsyncThunk(\"/games\", async thunkApi => {\n  const {\n    fulfillWithValue,\n    rejectWithValue\n  } = thunkApi;\n  const token = getItem(\"token\");\n  const {\n    status,\n    result,\n    error\n  } = await getRequest(`/games`, token);\n  console.log(result);\n  if (error) {\n    return rejectWithValue(`Cannot get game - Error status ${status} - ${error}`);\n  } else {\n    return fulfillWithValue(result);\n  }\n});\nconst gameSlice = createSlice({\n  name: \"games\",\n  initialState: {\n    games: {},\n    name: \"\",\n    loading: false,\n    error: null\n  },\n  reducers: {\n    startLoading: state => {\n      return {\n        ...state,\n        loading: true\n      };\n    },\n    stopLoading: state => {\n      return {\n        ...state,\n        loading: false\n      };\n    },\n    updateGame: (state, action) => {\n      const {\n        key,\n        value\n      } = action.payload;\n      return {\n        ...state,\n        [key]: value\n      };\n      // state[key] = value;\n    }\n  },\n\n  extraReducers: builder => {\n    builder.addCase(createGame.fulfilled, (state, action) => {\n      console.log(action.payload);\n      return {\n        ...state,\n        loading: false,\n        games: {\n          ...action.payload\n        }\n      };\n    }).addCase(createGame.rejected, (state, action) => {\n      return {\n        ...state,\n        loading: false,\n        error: action.payload\n      };\n    }).addCase(createGame.pending, state => {\n      return {\n        ...state,\n        loading: true\n      };\n    }).addCase(getGame.fulfilled, (state, action) => {\n      return {\n        ...state,\n        loading: false,\n        games: {\n          ...action.payload\n        }\n      };\n    }).addCase(getGame.rejected, (state, action) => {\n      return {\n        ...state,\n        loading: false,\n        error: action.payload\n      };\n    }).addCase(getGame.pending, (state, action) => {\n      return {\n        ...state,\n        loading: true\n      };\n    });\n  }\n});\nexport const {\n  startLoading,\n  stopLoading,\n  updateGame\n} = gameSlice.actions;\nexport default gameSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","getRequest","postRequest","getItem","createGame","thunkApi","fulfillWithValue","rejectWithValue","token","status","result","error","getGame","console","log","gameSlice","name","initialState","games","loading","reducers","startLoading","state","stopLoading","updateGame","action","key","value","payload","extraReducers","builder","addCase","fulfilled","rejected","pending","actions","reducer"],"sources":["/Users/watsonandrew/Desktop/scoreUp/react/src/redux/reducers/game.slice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { getRequest, postRequest } from \"../../api/api\";\nimport { getItem } from \"../../utils/storage.utils\";\n\nexport const createGame = createAsyncThunk(\n  \"/games/create\",\n  async (thunkApi) => {\n    const { fulfillWithValue, rejectWithValue } = thunkApi;\n    const token = getItem(\"token\");\n    const { status, result, error } = await postRequest(`/games/create`, token);\n    return error\n      ? rejectWithValue(\n          `Cannot create game - Error status ${status} - ${error}`,\n        )\n      : fulfillWithValue(result);\n  },\n);\n\nexport const getGame = createAsyncThunk(\"/games\", async (thunkApi) => {\n  const { fulfillWithValue, rejectWithValue } = thunkApi;\n  const token = getItem(\"token\");\n  const { status, result, error } = await getRequest(`/games`, token);\n  console.log(result);\n  if (error) {\n    return rejectWithValue(\n      `Cannot get game - Error status ${status} - ${error}`,\n    );\n  } else {\n    return fulfillWithValue(result);\n  }\n});\n\nconst gameSlice = createSlice({\n  name: \"games\",\n  initialState: {\n    games: {},\n    name: \"\",\n    loading: false,\n    error: null,\n  },\n  reducers: {\n    startLoading: (state) => {\n      return { ...state, loading: true };\n    },\n    stopLoading: (state) => {\n      return { ...state, loading: false };\n    },\n    updateGame: (state, action) => {\n      const { key, value } = action.payload;\n      return { ...state, [key]: value };\n      // state[key] = value;\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(createGame.fulfilled, (state, action) => {\n        console.log(action.payload);\n        return { ...state, loading: false, games: { ...action.payload } };\n      })\n      .addCase(createGame.rejected, (state, action) => {\n        return { ...state, loading: false, error: action.payload };\n      })\n      .addCase(createGame.pending, (state) => {\n        return { ...state, loading: true };\n      })\n      .addCase(getGame.fulfilled, (state, action) => {\n        return {\n          ...state,\n          loading: false,\n          games: { ...action.payload },\n        };\n      })\n      .addCase(getGame.rejected, (state, action) => {\n        return { ...state, loading: false, error: action.payload };\n      })\n      .addCase(getGame.pending, (state, action) => {\n        return { ...state, loading: true };\n      });\n  },\n});\n\nexport const { startLoading, stopLoading, updateGame } = gameSlice.actions;\n\nexport default gameSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}