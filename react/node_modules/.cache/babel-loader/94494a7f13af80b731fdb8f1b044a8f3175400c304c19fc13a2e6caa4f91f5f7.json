{"ast":null,"code":"import { postRequest } from \"../../api/api\";\nimport { createSlice } from \"@reduxjs/toolkit\";\nimport { setItem } from \"../../utils/storage.utils\";\nexport const signUp = (redirect, form) => async (dispatch, getState) => {\n  const loading = getState().user.loading;\n  if (loading) return;\n  dispatch(startLoading());\n  const {\n    status,\n    result,\n    error\n  } = await postRequest(`/users/sign-up`, form);\n  console.log(status, error, result);\n  if (status >= 200 && status < 300) {\n    setItem(\"token\", result.token);\n    redirect();\n  }\n  dispatch(stopLoading());\n};\nexport const signIn = (redirect, form) => async (dispatch, getState) => {\n  const loading = getState().user.loading;\n  if (loading) return;\n  dispatch(startLoading());\n  const {\n    status,\n    result,\n    error\n  } = await postRequest(`/users/sign-in`, form);\n  console.log(status, error, result);\n  if (status >= 200 && status < 300) {\n    setItem(\"token\", result.token);\n    redirect();\n  }\n  dispatch(stopLoading());\n};\nconst userIsConnected = (dispatch, getState) => {\n  const isConnected = getState().user.isConnected;\n  console.log(isConnected);\n};\nuserIsConnected();\nexport const userSlice = createSlice({\n  name: \"user\",\n  initialState: {\n    name: \"\",\n    firstname: \"\",\n    email: \"\",\n    number: 0,\n    password: \"\",\n    loading: false,\n    isConnected: true\n  },\n  reducers: {\n    startLoading: state => {\n      return {\n        ...state,\n        loading: true\n      };\n    },\n    stopLoading: state => {\n      return {\n        ...state,\n        loading: false\n      };\n    },\n    updateUser: (state, action) => {\n      const {\n        key,\n        value\n      } = action.payload;\n      return {\n        ...state,\n        [key]: value\n      };\n      // state[key] = value;\n    },\n\n    userConnected: (state, action) => {\n      return {\n        ...state,\n        isConnected: action\n      };\n    }\n  }\n});\nexport const {\n  startLoading,\n  stopLoading,\n  updateUser,\n  userConnected\n} = userSlice.actions;\nexport default userSlice.reducer;","map":{"version":3,"names":["postRequest","createSlice","setItem","signUp","redirect","form","dispatch","getState","loading","user","startLoading","status","result","error","console","log","token","stopLoading","signIn","userIsConnected","isConnected","userSlice","name","initialState","firstname","email","number","password","reducers","state","updateUser","action","key","value","payload","userConnected","actions","reducer"],"sources":["/Users/watsonandrew/Desktop/scoreUp/react/src/redux/reducers/user.slice.js"],"sourcesContent":["import { postRequest } from \"../../api/api\";\nimport { createSlice } from \"@reduxjs/toolkit\";\nimport { setItem } from \"../../utils/storage.utils\";\n\nexport const signUp = (redirect, form) => async (dispatch, getState) => {\n  const loading = getState().user.loading;\n  if (loading) return;\n  dispatch(startLoading());\n  const { status, result, error } = await postRequest(`/users/sign-up`, form);\n  console.log(status, error, result);\n  if (status >= 200 && status < 300) {\n    setItem(\"token\", result.token);\n    redirect();\n  }\n  dispatch(stopLoading());\n};\n\nexport const signIn = (redirect, form) => async (dispatch, getState) => {\n  const loading = getState().user.loading;\n  if (loading) return;\n  dispatch(startLoading());\n  const { status, result, error } = await postRequest(`/users/sign-in`, form);\n  console.log(status, error, result);\n  if (status >= 200 && status < 300) {\n    setItem(\"token\", result.token);\n    redirect();\n  }\n  dispatch(stopLoading());\n};\n\nconst userIsConnected = (dispatch, getState) => {\n  const isConnected = getState().user.isConnected;\n  console.log(isConnected);\n};\nuserIsConnected();\n\nexport const userSlice = createSlice({\n  name: \"user\",\n  initialState: {\n    name: \"\",\n    firstname: \"\",\n    email: \"\",\n    number: 0,\n    password: \"\",\n    loading: false,\n    isConnected: true,\n  },\n  reducers: {\n    startLoading: (state) => {\n      return { ...state, loading: true };\n    },\n    stopLoading: (state) => {\n      return { ...state, loading: false };\n    },\n    updateUser: (state, action) => {\n      const { key, value } = action.payload;\n      return { ...state, [key]: value };\n      // state[key] = value;\n    },\n    userConnected: (state, action) => {\n      return { ...state, isConnected: action };\n    },\n  },\n});\n\nexport const { startLoading, stopLoading, updateUser, userConnected } =\n  userSlice.actions;\nexport default userSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}